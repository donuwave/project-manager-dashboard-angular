<div class="board" cdkDropListGroup>
  @for (col of columns; track col.id) {
    <section class="column" [attr.data-color]="col.color">
      <header class="col-header">
        <div class="title">
          <span class="dot"></span>
          {{ col.title }}
          <span class="count">{{ col.tasks.length }}</span>
        </div>
        <button class="add" type="button" (click)="addTask(col.id)">+</button>
      </header>

      <div class="accent"></div>

      <div
        class="list"
        cdkDropList
        [cdkDropListData]="col.tasks"
        (cdkDropListDropped)="drop($event)"
      >
        @for (t of col.tasks; track t.id) {
          <app-kanban-card
            cdkDrag
            [cdkDragDisabled]="editingTaskId === t.id"
            [task]="t"
            [editing]="editingTaskId === t.id"
            (editStart)="startEdit($event)"
            (editCancel)="endEdit()"
            (update)="updateTask(col.id, $event)"
            (remove)="removeTask(col.id, $event)"
          >
          </app-kanban-card>
        }
      </div>
    </section>
  }
</div>
